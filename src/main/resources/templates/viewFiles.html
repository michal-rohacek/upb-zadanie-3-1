<html xmlns:th="https://www.thymeleaf.org">
<head th:replace="fragments/head"></head>
<body>

<div id="main">
    <div th:replace="fragments/current_user"></div>
    <div>
        <div class="row">
            <p class="col-8">Choose a file you wish see details:</p>
            <div class="col-4">
                <p>Search by file name or comment:</p>

                <form action="/seeFilteredFiles" method="post">
                    <input id="search" class="input-comment" type="search" name="search" required>
                    <input type="hidden" name="myFiles" th:value="${myFiles}">
                    <input class="submit-button" type="submit" value="Search" />
                </form>
            </div>
        </div>
        <hr>
        <h3 th:text="${myFiles} ? 'Only your files' : 'All files'"></h3>
        <p>List of encrypted files:</p>
        <ul>
            <li class="file-container" th:each="fileDto : ${fileDtos}">
                <b>File : </b><a th:href="${fileDto.fileLink}" th:text="${fileDto.fileLink}"/>
                <ul>
                    <li th:each="comment: ${fileDto.comments}">
                        <div class="row">
                            <b>User :</b> <div class="col-2" th:text="${comment.userCreator.username}"></div>
                            <b>Comment :</b> <div class="col-8" th:text="${comment.comment}"></div>
                        </div>
                    </li>
                </ul>
                <form action="/addComment" method="post" class="form-inline" style="margin-top: 3%;">
                    Add comment:
                    <input type="text" name="comment" placeholder="Type here ..." class="form-group" style="
                        margin-left: 3%;
                        margin-right: 2%;
                        padding: 15px;
                        display: inline-block;
                        border: none;
                        background: #f1f1f1;">
                    <input type="hidden" name="fileId" th:value="${fileDto.id}">
                    <input type="hidden" name="myFiles" th:value="${myFiles}">
                    <input type="submit" value="Add" style="
                        background-color: #03dffc;
                        color: white;
                        padding: 16px 20px;
                        margin: 8px 0;
                        border: none;
                        opacity: 0.9;">
                </form>

        </ul>
    </div>

    <div th:replace="fragments/nav_buttons"></div>
    <div th:replace="fragments/footer"></div>
</div>
</body>
</html>